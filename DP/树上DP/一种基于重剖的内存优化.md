[原博客链接](https://codeforces.com/blog/entry/113453)

问题：
一个树形背包，每一个节点都需要开$|S|$的空间来存储信息，如果直接开数组保存$O(|S|\cdot n)$的空间复杂度是不可以接受的

下面介绍一种基于重剖原理的可以将空间复杂度优化到$|S|\log n$的做法：

首先是动态开DP数组，同时注意使用完后需要释放内存，我们在DP时先不要给当前遍历到的节点分配内存，先DFS它的重儿子得到它重儿子的信息，然后再给该节点分配内存初始化并合并重儿子的DP信息。

因为走重链的节点没有开内存，所以在遍历的过程中只有轻链的父亲分配了DP数字的内存，而根到任意节点的轻链个数最多$\log n$条，所以任意时刻我们只使用了$O(|S|\cdot \log n)$的内存。
