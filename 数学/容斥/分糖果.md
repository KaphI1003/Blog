# [分糖果](https://ac.nowcoder.com/acm/problem/19039)

### 分析：
首先，直接求不同的方案数比较麻烦，但是如果我们求相同就比较简单。那么我们就可以考虑容斥。

先考虑链的情况。把链分成k段，每段中的元素全部相等，那么总方案数就是每段的最小值相乘,设这个状态的总方案数为$S_k$，那么我们的贡献就是

$$
\sum_{k=1}^{n} S_K*(-1)^k
$$

我们设前i个数的方案数为$f_i$，那么我们就可以列出DP转移方程
$$
f_i=\min_{k=j}^i a_k*f_{j-1},j\leq i
$$

那么我们就得到了一个$O(n^2)$算法，但我们还要考虑最后一个元素和第一个元素相同分在一组的情况的情况。